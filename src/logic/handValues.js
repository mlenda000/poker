// export const royalFlush = [
//     [48, 49, 50, 51, 52],
//     [35, 36, 37, 38, 39],
//     [22, 23, 24, 25, 26],
//     [9, 10, 11, 12, 13],
//     ["*", 9, 10, 11, 12],
//     ["*", 9, 10, 11, 13],
//     ["*", 9, 10, 12, 13],
//     ["*", 9, 11, 12, 13],
//     ["*", 10, 11, 12, 13],
//     ["*", 22, 23, 24, 25],
//     ["*", 22, 23, 24.26],
//     ["*", 22, 23, 25, 26],
//     ["*", 22, 24, 25, 26],
//     ["*", 23, 24, 25, 26],
//     ["*", 35, 36, 37, 38],
//     ["*", 35, 36, 37, 39],
//     ["*", 35, 36, 38, 39],
//     ["*", 35, 37, 38, 39],
//     ["*", 36, 37, 38, 39],
//     ["*", 48, 49, 50, 51],
//     ["*", 48, 49, 50, 52],
//     ["*", 48, 49, 51, 52],
//     ["*", 48, 50, 51, 52],
//     ["*", 49, 50, 51, 52],
//     ["*", "*", 11, 12, 13],
//     ["*", "*", 10, 11, 12],
//     ["*", "*", 10, 11, 13],
//     ["*", "*", 10, 12, 13],
//     ["*", "*", 9, 10, 11],
//     ["*", "*", 9, 10, 12],
//     ["*", "*", 9, 10, 13],
//     ["*", "*", 9, 11, 12],
//     ["*", "*", 9, 11, 13],
//     ["*", "*", 9, 12, 13],
//     ["*", "*", 50, 51, 52],
//     ["*", "*", 49, 50, 51],
//     ["*", "*", 49, 50, 52],
//     ["*", "*", 49, 51, 52],
//     ["*", "*", 48, 49, 50],
//     ["*", "*", 48, 49, 51],
//     ["*", "*", 48, 49, 52],
//     ["*", "*", 48, 50, 51],
//     ["*", "*", 48, 50, 52],
//     ["*", "*", 48, 51, 52],
//     ["*", "*", 24, 25, 26],
//     ["*", "*", 23, 24, 25],
//     ["*", "*", 23, 24, 26],
//     ["*", "*", 23, 25, 26],
//     ["*", "*", 22, 23, 24],
//     ["*", "*", 22, 23, 25],
//     ["*", "*", 22, 23, 26],
//     ["*", "*", 22, 24, 25],
//     ["*", "*", 22, 24, 26],
//     ["*", "*", 22, 25, 26],
//     ["*", "*", 37, 38, 39],
//     ["*", "*", 36, 37, 38],
//     ["*", "*", 36, 37, 39],
//     ["*", "*", 36, 38, 39],
//     ["*", "*", 35, 36, 37],
//     ["*", "*", 35, 36, 38],
//     ["*", "*", 35, 36, 39],
//     ["*", "*", 35, 37, 38],
//     ["*", "*", 35, 37, 39],
//     ["*", "*", 35, 38, 39],
//     ["*", "*", "*", 9, 10],
//     ["*", "*", "*", 9, 11],
//     ["*", "*", "*", 9, 12],
//     ["*", "*", "*", 9, 13],
//     ["*", "*", "*", 10, 11],
//     ["*", "*", "*", 10, 12],
//     ["*", "*", "*", 10, 13],
//     ["*", "*", "*", 11, 12],
//     ["*", "*", "*", 11, 13],
//     ["*", "*", "*", 12, 13],
//     ["*", "*", "*", 22, 23],
//     ["*", "*", "*", 22, 24],
//     ["*", "*", "*", 22, 25],
//     ["*", "*", "*", 22, 26],
//     ["*", "*", "*", 23, 24],
//     ["*", "*", "*", 23, 25],
//     ["*", "*", "*", 23, 26],
//     ["*", "*", "*", 24, 25],
//     ["*", "*", "*", 24, 26],
//     ["*", "*", "*", 25, 26],
//     ["*", "*", "*", 35, 36],
//     ["*", "*", "*", 35, 37],
//     ["*", "*", "*", 35, 38],
//     ["*", "*", "*", 35, 39],
//     ["*", "*", "*", 36, 37],
//     ["*", "*", "*", 36, 38],
//     ["*", "*", "*", 36, 39],
//     ["*", "*", "*", 37, 38],
//     ["*", "*", "*", 37, 39],
//     ["*", "*", "*", 38, 39],
//     ["*", "*", "*", 48, 49],
//     ["*", "*", "*", 48, 50],
//     ["*", "*", "*", 48, 51],
//     ["*", "*", "*", 48, 52],
//     ["*", "*", "*", 49, 50],
//     ["*", "*", "*", 49, 51],
//     ["*", "*", "*", 49, 52],
//     ["*", "*", "*", 50, 51],
//     ["*", "*", "*", 50, 52],
//     ["*", "*", "*", 51, 52],
//     ["*", "*", "*", "*", 9],
//     ["*", "*", "*", "*", 10],
//     ["*", "*", "*", "*", 11],
//     ["*", "*", "*", "*", 12],
//     ["*", "*", "*", "*", 13],
//     ["*", "*", "*", "*", 22],
//     ["*", "*", "*", "*", 23],
//     ["*", "*", "*", "*", 24],
//     ["*", "*", "*", "*", 25],
//     ["*", "*", "*", "*", 26],
//     ["*", "*", "*", "*", 35],
//     ["*", "*", "*", "*", 36],
//     ["*", "*", "*", "*", 37],
//     ["*", "*", "*", "*", 38],
//     ["*", "*", "*", "*", 39],
//     ["*", "*", "*", "*", 48],
//     ["*", "*", "*", "*", 49],
//     ["*", "*", "*", "*", 50],
//     ["*", "*", "*", "*", 51],
//     ["*", "*", "*", "*", 52],
//     ["*", "*", "*", "*", "*"],
//   ];
//   export const fiveOfAKind = [
//     ["*", 1, 14, 27, 40],
//     ["*", 2, 15, 28, 41],
//     ["*", 3, 16, 29, 42],
//     ["*", 4, 17, 30, 43],
//     ["*", 5, 18, 31, 44],
//     ["*", 6, 19, 32, 45],
//     ["*", 7, 20, 33, 46],
//     ["*", 8, 21, 34, 47],
//     ["*", 9, 22, 35, 48],
//     ["*", 10, 23, 36, 49],
//     ["*", 11, 24, 37, 50],
//     ["*", 12, 25, 38, 51],
//     ["*", 13, 26, 39, 52],
//     ["*", "*", 1, 14, 27],
//     ["*", "*", 1, 27, 40],
//     ["*", "*", 14, 27, 40],
//     ["*","*", 2, 15, 28],
//     ["*", "*", 2, 15, 41],
//     ["*", "*", 15, 28, 41],
//     ["*","*", 3, 16, 29],
//     ["*", "*", 3, 29, 42],
//     ["*", "*", 16, 29, 42],
//     ["*","*", 4, 17, 30],
//     ["*","*", 4, 30, 43],
//     ["*","*", 17, 30, 43],
//     ["*","*",5, 18, 31],
//     ["*", "*", 5, 31, 44],
//     ["*", "*", 18, 31, 44],
//     ["*", "*",6, 19, 32],
//     ["*", "*", 6, 32, 45],
//     ["*", "*", 19, 32, 45],
//     ["*", "*",7, 20, 33],
//     ["*", "*", 7, 33, 46],
//     ["*", "*", 20, 33, 46],
//     ["*", "*",8, 21, 34],
//     ["*", "*", 8, 34, 47],
//     ["*", "*", 21, 34, 47],
//     ["*", "*",9, 22, 35],
//     ["*", "*", 9, 35, 48],
//     ["*", "*", 22, 35, 48],
//     ["*", "*",10, 23, 36],
//     ["*", "*", 10, 36, 49],
//     ["*", "*", 23, 36, 49],
//     ["*", "*",11, 24, 37],
//     ["*", "*", 11, 37, 50],
//     ["*", "*", 24, 37, 50],
//     ["*", "*",12, 25, 38],
//     ["*", "*", 12, 38, 51],
//     ["*", "*", 25, 38, 51],
//     ["*", "*",13, 26, 39],
//     ["*", "*", 13, 39, 52],
//     ["*", "*", 26, 39, 52],
//     ["*","*","*",1,14],
//     ["*","*","*",1,27],
//     ["*","*","*",1,40],
//     ["*","*","*",14,27],
//     ["*","*","*",14,40],
//     ["*","*","*",27,40],
//     ["*","*","*",2,15],
//     ["*","*","*",2,28],
//     ["*","*","*",2,41],
//     ["*","*","*",15,28],
//     ["*","*","*",15,41],
//     ["*","*","*",28,41],
//     ["*","*","*",3,16],
//     ["*","*","*",3,29],
//     ["*","*","*",3,42],
//     ["*","*","*",16,29],
//     ["*","*","*",16,42],
//     ["*","*","*",29,42],
//     ["*","*","*",4,17],
//     ["*","*","*",4,30],
//     ["*","*","*",4,43],
//     ["*","*","*",17,30],
//     ["*","*","*",17,43],
//     ["*","*","*",30,43],
//     ["*","*","*",5,18],
//     ["*","*","*",5,31],
//     ["*","*","*",5,44],
//     ["*","*","*",18,31],
//     ["*","*","*",18,44],
//     ["*","*","*",31,44],
//     ["*","*","*",6,19],
//     ["*","*","*",6,32],
//     ["*","*","*",6,45],
//     ["*","*","*",19,32],
//     ["*","*","*",19,45],
//     ["*","*","*",32,45],
//     ["*","*","*",7,20],
//     ["*","*","*",7,33],
//     ["*","*","*",7,46],
//     ["*","*","*",20,33],
//     ["*","*","*",20,46],
//     ["*","*","*",33,46],
//     ["*","*","*",8,21],
//     ["*","*","*",8,34],
//     ["*","*","*",8,47],
//     ["*","*","*",21,34],
//     ["*","*","*",21,47],
//     ["*","*","*",34,47],
//     ["*","*","*",9,22],
//     ["*","*","*",9,35],
//     ["*","*","*",9,48],
//     ["*","*","*",22,35],
//     ["*","*","*",22,48],
//     ["*","*","*",35,48],
//     ["*","*","*",10,23],
//     ["*","*","*",10,36],
//     ["*","*","*",10,49],
//     ["*","*","*",23,36],
//     ["*","*","*",23,49],
//     ["*","*","*",36,49],
//     ["*","*","*",11,24],
//     ["*","*","*",11,37],
//     ["*","*","*",11,50],
//     ["*","*","*",24,37],
//     ["*","*","*",24,50],
//     ["*","*","*",37,50],
//     ["*","*","*",12,25],
//     ["*","*","*",12,38],
//     ["*","*","*",12,51],
//     ["*","*","*",25,38],
//     ["*","*","*",25,51],
//     ["*","*","*",38,51],
//     ["*","*","*",13,26],
//     ["*","*","*",13,39],
//     ["*","*","*",13,52],
//     ["*","*","*",26,39],
//     ["*","*","*",26,52],
//     ["*","*","*",39,52],
//     ["*","*","*","*",1],
//     ["*","*","*","*",2],
//     ["*","*","*","*",3],
//     ["*","*","*","*",4],
//     ["*","*","*","*",5],
//     ["*","*","*","*",6],
//     ["*","*","*","*",7],
//     ["*","*","*","*",8]
//   ];

export const order = "23456789TJQKA"

export function getHandDetails(hand) {
    const cards = hand.split(" ")
    const faces = cards.map(a => String.fromCharCode([77 - order.indexOf(a[0])])).sort()
    const suits = cards.map(a => a[1]).sort()
    const counts = faces.reduce(count, {})
    const duplicates = Object.values(counts).reduce(count, {})
    const flush = suits[0] === suits[4]
    const first = faces[0].charCodeAt(0)
    //Also handle low straight
    const lowStraight = faces.join("") === "AJKLM"
    faces[0] = lowStraight ? "N" : faces[0]
    const straight = lowStraight || faces.every((f, index) => f.charCodeAt(0) - first === index)
    let rank =
        (flush && straight && 1) ||
        (duplicates[4] && 2) ||
        (duplicates[3] && duplicates[2] && 3) ||
        (flush && 4) ||
        (straight && 5) ||
        (duplicates[3] && 6) ||
        (duplicates[2] > 1 && 7) ||
        (duplicates[2] && 8) ||
        9

    return { rank, value: faces.sort(byCountFirst).join("") }

    function byCountFirst(a, b) {
        //Counts are in reverse order - bigger is better
        const countDiff = counts[b] - counts[a]
        if (countDiff) return countDiff // If counts don't match return
        return b > a ? -1 : b === a ? 0 : 1
    }
    function count(c, a) {
        c[a] = (c[a] || 0) + 1
        return c
    }
}